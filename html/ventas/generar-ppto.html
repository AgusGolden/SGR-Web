<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Generar Presupuesto</title>
    <link rel="stylesheet" href="../../css/styles.css" />
    <link rel="stylesheet" href="../../css/ventas.css" />
</head>

<body>
    <header>
        <nav class="menu-nav">
            <ul>
                <li><a href="../../index.html">Inicio</a></li>
                <li><a href="../clientes.html">Clientes</a></li>
                <li><a href="../reparaciones.html">Reparaciones</a></li>
                <li><a href="../ventas.html">Ventas</a></li>
                <li><a href="../compras.html">Compras</a></li>
            </ul>
        </nav>

        <nav class="submenu-nav">
            <ul>
                <li><a href="./generar-ppto.html">Generar Presupuesto</a></li>
                <li><a href="./aprobar-ppto.html">Aprobar Presupuesto</a></li>
                <li><a href="./generar-factura.html">Generar Factura</a></li>
                <li><a href="./registrar-pago.html">Registrar Pago</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <h1>Generar Presupuesto</h1>

        <section class="contenedor">
            <h2 id="subtitulo-reparacion">Seleccionar una reparación para avanzar...</h2>

            <div class="acciones">
                <button id="btn-repa-marcada" class="btn-repa-marcada" disabled>Generar Presupuesto</button>
            </div>

            <!-- Tabla de reparaciones -->
            <table class="tabla" id="tabla-reparaciones">
                <thead>
                    <tr>
                        <th>Fecha Ingreso</th>
                        <th>Reparación</th>
                        <th>Cliente</th>
                        <th>Proveedor</th>
                        <th>Título</th>
                        <th>Código</th>
                        <th>Serie</th>
                        <th>Estado</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>2025-07-07</td>
                        <td>12345</td>
                        <td>ACME S.A.</td>
                        <td>-</td>
                        <td>Monitor LCD</td>
                        <td>MON123</td>
                        <td>SN-98765</td>
                        <td>Cotización Recibida</td>
                    </tr>
                    <tr>
                        <td>2025-07-09</td>
                        <td>12346</td>
                        <td>Beta S.R.L.</td>
                        <td>ProveedorY</td>
                        <td>Teclado</td>
                        <td>TEC456</td>
                        <td>SN-54321</td>
                        <td>Presupuesto Pendiente</td>
                    </tr>
                    <tr>
                        <td>2025-07-09</td>
                        <td>12347</td>
                        <td>ACME S.A.</td>
                        <td>-</td>
                        <td>Monitor LCD</td>
                        <td>MON123</td>
                        <td>SN-98766</td>
                        <td>Cotización Solcicitada</td>
                    </tr>
                    <tr>
                        <td>2025-07-10</td>
                        <td>12348</td>
                        <td>Beta S.R.L.</td>
                        <td>ProveedorY</td>
                        <td>Teclado</td>
                        <td>TEC456</td>
                        <td>SN-54322</td>
                        <td>Presupuesto Pendiente</td>
                    </tr>
                    <tr>
                        <td>2025-07-16</td>
                        <td>12350</td>
                        <td>ACME S.A.</td>
                        <td>-</td>
                        <td>Monitor LCD</td>
                        <td>MON123</td>
                        <td>SN-98769</td>
                        <td>Diagnóstico Pendiente</td>
                    </tr>
                </tbody>
            </table>

            <section id="formulario-ppto" class="contenedor oculto">

                <!-- Datos del Equipo -->
                <fieldset>
                    <legend>Datos del Equipo</legend>

                    <div class="fila">
                        <label>Número de Reparación:</label>
                        <input type="text" id="nro-reparacion" readonly />

                        <label>Fecha de Ingreso:</label>
                        <input type="date" id="fecha-ingreso" readonly />
                    </div>

                    <div class="fila">
                        <label>Cliente:</label>
                        <input type="text" id="cliente" readonly />
                    </div>

                    <div class="fila">
                        <label>Título del Equipo:</label>
                        <input type="text" id="titulo" readonly />

                        <label>Código del Equipo:</label>
                        <input type="text" id="codigo" readonly />

                        <label>Número de Serie:</label>
                        <input type="text" id="serie" readonly />
                    </div>
                </fieldset>

                <!-- Diagnóstico -->
                <fieldset id="fieldset-diagnostico">
                    <legend>Datos del Diagnóstico Técnico</legend>

                    <div class="fila">
                        <label>Fecha del Diagnóstico:</label>
                        <input type="date" id="fecha-diagnostico" readonly />
                    </div>

                    <div class="fila">
                        <label>Fecha de Cotización:</label>
                        <input type="date" id="fecha-cotizacion" readonly />
                    </div>

                    <div class="fila">
                        <label>Moneda:</label>
                        <select id="moneda-diagnostico" disabled>
                            <option value="ARS">ARS</option>
                            <option value="USD">USD</option>
                        </select>
                    </div>

                    <div class="fila">
                        <label>Cotización:</label>
                        <input type="number" id="cotizacion-diagnostico" readonly />
                    </div>
                </fieldset>

                <!-- Presupuesto Proveedor -->
                <fieldset id="fieldset-proveedor" class="oculto">
                    <legend>Datos del Presupuesto del Proveedor</legend>

                    <div class="fila">
                        <label>Proveedor Asignado:</label>
                        <input type="text" id="proveedor-asignado" readonly />
                    </div>

                    <div class="fila">
                        <label>Presupuesto del Proveedor:</label>
                        <input type="text" />
                    </div>

                    <div class="fila">
                        <label>Fecha del Presupuesto:</label>
                        <input type="date" id="fecha-presupuesto-proveedor" />
                    </div>

                    <div class="fila">
                        <label>Moneda:</label>
                        <select id="moneda-ppto-proveedor">
                            <option value="ARS">ARS</option>
                            <option value="USD">USD</option>
                        </select>
                    </div>

                    <div class="fila">
                        <label>Costo:</label>
                        <input type="number" id="costo" />
                    </div>

                    <div class="fila">
                        <label>Comentarios: </label>
                        <textarea></textarea>
                    </div>
                </fieldset>

                <!-- Informe -->
                <fieldset>
                    <legend>Informe</legend>

                    <div class="fila">
                        <label>Fecha del Presupuesto:</label>
                        <input type="date" id="fecha-presupuesto" readonly />
                    </div>

                    <div class="fila">
                        <label>Falla Informada:</label>
                        <textarea id="falla-informada" readonly>Ej: No enciende, pantalla negra...</textarea>
                    </div>

                    <div class="fila">
                        <label>Diagnóstico:</label>
                        <textarea id="diagnostico"></textarea>
                    </div>

                    <div class="fila">
                        <label>Plazo:</label>
                        <input type="number" id="plazo" />
                    </div>

                    <div class="fila">
                        <label>Comentarios:</label>
                        <textarea></textarea>
                    </div>
                </fieldset>

                <!-- Presupuesto -->
                <fieldset>
                    <legend>Presupuesto</legend>

                    <div class="fila">
                        <label>Días de Garantía:</label>
                        <input type="number" id="garantia" placeholder="Días" value="90" />

                        <label>Validez del Presupuesto:</label>
                        <input type="number" id="vencimiento" placeholder="Días" value="60" readonly />
                    </div>

                    <div class="fila">
                        <label>Moneda:</label>
                        <select id="moneda-ppto">
                            <option value="ARS">ARS</option>
                            <option value="USD">USD</option>
                        </select>
                    </div>

                    <div class="fila">
                        <label>Importe Base:</label>
                        <input type="number" id="importe-ppto" />
                    </div>

                    <div class="fila">
                        <label>Tipo de Descuento:</label>
                        <select id="tipo-descuento">
                            <option value="">-</option>
                            <option value="porcentaje-importe">% sobre importe</option>
                            <option value="porcentaje-total">% sobre importe + adicionales</option>
                            <option value="valor">Valor fijo</option>
                        </select>
                        <input type="text" class="oculto" id="valor-descuento" placeholder="Ingrese valor o %" />
                    </div>

                    <!-- Adicionales -->
                    <fieldset>
                        <legend>Adicionales</legend>

                        <div class="fila">
                            <label><input type="checkbox" id="chk-adicional-fijo" /> Valor fijo</label>
                            <input type="text" id="input-adicional-fijo" class="oculto" placeholder="Ej: $500" />
                        </div>

                        <div class="fila">
                            <label><input type="checkbox" id="chk-adicional-porc" /> Porcentaje</label>
                        </div>

                        <div class="fila oculto" id="contenedor-porcentaje">
                            <label><input type="radio" name="tipo-porcentaje" value="importe" /> % (importe)</label>
                            <label><input type="radio" name="tipo-porcentaje" value="total" /> % (total)</label>
                        </div>

                        <div class="fila oculto" id="input-valor-porcentaje">
                            <label>Valor (%):</label>
                            <input type="text" id="valor-adicional-porcentaje" placeholder="Ej: 100%" />
                        </div>
                    </fieldset>

                    <!-- Totales -->
                    <fieldset>
                        <legend>Total</legend>
                        <div class="fila">
                            <label>Total USD:</label>
                            <input type="text" id="total-usd" readonly />
                        </div>
                            <div class="fila">
                            <label>Total ARS:</label>
                            <input type="text" id="total-ars" readonly />
                        </div>
                        <div class="fila">
                            <label id="label-tipo-cambio">Tipo de Cambio:</label>
                            <input type="text" id="tipo-cambio" readonly />
                        </div>
                    </fieldset>

                    <div class="fila">
                        <label>Comentarios:</label>
                        <textarea placeholder="Ej: costos: $..... + $..... = $....."></textarea>
                    </div>
                </fieldset>

                <div class="acciones">
                    <button id="btn-confirmar" class="btn-confirmar oculto">Generar Presupuesto</button>
                    <button id="btn-cancelar" class="btn-cancelar oculto">Cancelar</button>
                </div>
            </section>
        </section>
    </main>

    <script src="../../js/script.js"></script>
    <script src="../../js/ventas.js"></script>
    <script src="../../js/ventas/generar-ppto.js"></script>
</body>

</html>